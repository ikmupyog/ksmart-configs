{
  "key": "consolidatedreceipt",
  "documentType": "CONSOLIDATED_RECEIPT",
  "DataConfigs": {
    "moduleName": "rainmaker-common",
    "version": "1.0.0",
    "baseKeyPath": "$.Payments.*",
    "entityIdPath": "$.id",
    "isCommonTableBorderRequired": true,
    "mappings": [
      {
        "topic": "common-pdf-generation-3",
        "mappings": [
          {
            "externalAPI": [
              {
                "path": "https://ksmart-dev.lsgkerala.gov.in/egov-mdms-service/v1/_get",
                "queryParam": "moduleName=tenant&masterName=tenants&tenantId=kl&filter=%5B?(@.code=='kl.cochin')%5D",
                "apiRequest": null,
                "responseMapping": [
                  {
                    "variable": "tenantMl",
                    "value": "$.MdmsRes.tenant.tenants[0].city.localName"
                  },
                  {
                    "variable": "tenantEn",
                    "value": "$.MdmsRes.tenant.tenants[0].city.name"
                  },
                  {
                    "variable": "logotenant",
                    "value": "$.MdmsRes.tenant.tenants[0].logoId",
                    "type": "image"
                  }
                ]
              }
            ],
            "direct": [
              {
                "variable": "payerName",
                "value": {
                  "path": "$.payerName"
                }
              },
              {
                "variable": "slNo",
                "value": {
                  "path": "$.slNo"
                }
              },
              {
                "variable": "receiptDate",
                "value": {
                  "path": "$.receiptDate"
                },
                "type": "date"
              },
              {
                "variable": "user-name",
                "value": {
                  "path": "$.userInfo.name"
                },
                "type": "selectFromRequestInfo"
              },
              {
                "variable": "payerContact",
                "value": {
                  "path": "$.mobileNumber"
                }
              },
              {
                "variable": "receiptNo",
                "value": {
                  "path": "$.paymentDetails[0].receiptNumber"
                }
              },
              {
                "variable": "typeOfService",
                "value": {
                  "path": "$.paymentDetails[0].businessService"
                }
              },
              {
                "variable": "paidAmount",
                "value": {
                  "path": "$.paymentDetails[0].totalAmountPaid"
                }
              },
              {
                "variable": "fromPeriod",
                "value": {
                  "path": "$.paymentDetails[0].bill.billDetails[0].fromPeriod"
                },
                "type": "date"
              },
              {
                "variable": "toPeriod",
                "value": {
                  "path": "$.paymentDetails[0].bill.billDetails[0].toPeriod"
                },
                "type": "date"
              },
              {
                "variable": "consumerID",
                "value": {
                  "path": "$.paymentDetails[0].bill.consumerCode"
                }
              },
              {
                "variable": "transactionID",
                "value": {
                  "path": "$.transactionNumber"
                }
              },
              {
                "variable": "dueAmount",
                "value": {
                  "path": "$.paymentDetails[0].totalDue"
                }
              },
              {
                "variable": "budgetCode",
                "value": {
                  "path": "$.budgetCode"
                }
              },
              {
                "variable": "headCode",
                "value": {
                  "path": "$.headCode"
                }
              },
              {
                "variable": "receipt_no",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_RECEIPT_NO"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "consumer_id",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_CONSUMER_ID"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "payment_date",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_PAYMENT_DATE"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "payer_name",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_PAYER_NAME"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "payer_contact",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_PAYER_CONTACT"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "payment_status",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_PAYMENT_STATUS"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "service_type",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_SERVICE_TYPE"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "billing_period",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_BILLING_PERIOD"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "paid_amount",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_PAID_AMOUNT"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "pending_amount",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_PENDING_AMOUNT"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "excess_amount_paid",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_EXCESS_AMOUNT_PAID"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "payment_mode",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_PAYMENT_MODE"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "transaction_id",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_TRANSACTION_ID"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "generated_by",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_GENERATED_BY"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "commissioner/eo",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_COMMISSIONER_EO"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "no_signature",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_NO_SIGNATURE"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },

              {
                "variable": "embeddedUrl",
                "value": {
                  "path": "$.embeddedUrl"
                }
              },
              {
                "variable": "to",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_TO"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              },
              {
                "variable": "total_bill_amount",
                "value": {
                  "path": "PDF_STATIC_LABEL_CONSOLIDATED_RECEIPT_TOTAL_BILL_AMOUNT"
                },
                "type": "label",
                "localisation": {
                  "required": true,
                  "prefix": null,
                  "module": "rainmaker-common"
                }
              }
            ]
          },
          {
            "derived": [
              {
                "variable": "pendingAmount",
                "formula": "{{dueAmount}}>{{paidAmount}}?{{dueAmount}}-{{paidAmount}}:0"
              },
              {
                "variable": "excessAmountPaid",
                "formula": "{{paidAmount}}>{{dueAmount}}?{{paidAmount}}-{{dueAmount}}:0"
              },
              {
                "variable": "slNo",
                "formula": "{{slNo}}?{{slNo}}+1:1"
              }
            ]
          },
          {
            "qrcodeConfig": [
              {
                "variable": "qr_code_image",
                "value": "{{embeddedUrl}}"
              }
            ]
          }
        ]
      }
    ]
  }
}

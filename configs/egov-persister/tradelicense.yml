serviceMaps:
 serviceName: tl-services
 mappings:
 - version: 1.0
   description: Persists tradeLicense details in EG_TL_TradeLicense  table
   fromTopic: save-tl-tradelicense
   isTransaction: true
   queryMaps:

       - query: INSERT INTO eg_tl_tradelicense( id, accountid,tenantid,tradeName,licenseunitnamelocal,validfrom,validto,licensetype,applicationNumber, oldlicensenumber, applicationdate, commencementdate, financialyear, action, status, createdby, lastmodifiedby, createdtime, lastmodifiedtime, businessservice, applicationtype, workflowcode, desiredlicenseperiod,mig_num_appln_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: Licenses.*
         jsonMaps:
          - jsonPath: $.Licenses.*.id

          - jsonPath: $.Licenses.*.accountId

          - jsonPath: $.Licenses.*.tenantId

          - jsonPath: $.Licenses.*.licenseUnitName

          - jsonPath: $.Licenses.*.licenseUnitNameLocal

          - jsonPath: $.Licenses.*.validFrom

          - jsonPath: $.Licenses.*.validTo

          - jsonPath: $.Licenses.*.licenseType

          - jsonPath: $.Licenses.*.applicationNumber

          - jsonPath: $.Licenses.*.oldLicenseNumber

          - jsonPath: $.Licenses.*.applicationDate

          - jsonPath: $.Licenses.*.commencementDate

          - jsonPath: $.Licenses.*.financialYear

          - jsonPath: $.Licenses.*.action

          - jsonPath: $.Licenses.*.status

          - jsonPath: $.Licenses.*.auditDetails.createdBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.createdTime

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.businessService

          - jsonPath: $.Licenses.*.applicationType

          - jsonPath: $.Licenses.*.workflowCode

          - jsonPath: $.Licenses.*.desiredLicensePeriod

          - jsonPath: $.Licenses.*.oldApplicationNumber



       - query: INSERT INTO eg_tl_tradelicensedetail( id, ownershipcategory, channel, tradelicenseid,structureType,noOfEmployees,businesssector, capitalinvestment, enterprisetype, structureplacesubtype, businessactivitydesc, licenseetype, createdby, lastmodifiedby, createdtime, lastmodifiedtime, establishmentunitid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?, ?, ? );
         basePath: Licenses.*.tradeLicenseDetail
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownershipCategory

          - jsonPath: $.Licenses.*.tradeLicenseDetail.channel

          - jsonPath: $.Licenses.*.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structureType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.noOfEmployees

          - jsonPath: $.Licenses.*.tradeLicenseDetail.businessSector

          - jsonPath: $.Licenses.*.tradeLicenseDetail.capitalInvestment

          - jsonPath: $.Licenses.*.tradeLicenseDetail.enterpriseType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlaceSubtype
          
          - jsonPath: $.Licenses.*.tradeLicenseDetail.businessActivityDesc

          - jsonPath: $.Licenses.*.tradeLicenseDetail.licenseeType

          - jsonPath: $.Licenses.*.auditDetails.createdBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.createdTime

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.establishmentUnitId


       - query: INSERT INTO eg_tl_tradeunit( id, tenantid,active, businesscategory, businesstype, businesssubtype, tradelicensedetailid, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: Licenses.*.tradeLicenseDetail.tradeUnits.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.businessCategory

          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.businessType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.businessSubtype

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.tradeUnits[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.tradeUnits[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.tradeUnits[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.tradeUnits[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.tradeUnits[*].id)].auditDetails.lastModifiedTime


       - query: INSERT INTO eg_tl_owner( id,tenantid,active, tradelicensedetailid, ownername, aadharno, email, createdby,lastmodifiedby, createdtime, lastmodifiedtime, ownernamelocal, careof, careofname, designation, housename, street, locality, postoffice, pincode, ownercontactno) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: Licenses.*.tradeLicenseDetail.owners.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.uuid

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.userActive

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.name

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.aadhaarNumber

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.emailId

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.applicantNameLocal

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.careOf

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.careOfName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.designation

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.houseName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.street

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.locality

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.postOffice

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.pincode

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.mobileNumber


       - query: INSERT INTO eg_tl_document_owner(id,tenantId,userid,active, tradeLicenseDetailId, documenttype, fileStoreId,documentuid, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ? ,? ,?, ?, ?, ?, ?, ?, ?, ?);
         basePath: Licenses.*.tradeLicenseDetail.owners.*.documents.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.documents.*.id

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners.*.documents[*].id)].tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners[*][?({id} in @.documents[*].id)].uuid

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.documents.*.active

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners.*.documents[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.documents.*.documentType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.documents.*.fileStoreId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.documents.*.documentUid

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners.*.documents[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners.*.documents[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners.*.documents[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners.*.documents[*].id)].auditDetails.lastModifiedTime



       - query: INSERT INTO eg_tl_applicationdocument( id, tenantid, active, documenttype, tradecategorydetail, filestoreid, tradelicensedetailid, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: Licenses.*.tradeLicenseDetail.applicationDocuments.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.documentType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.tradecategorydetail

          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.fileStoreId

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.applicationDocuments[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.applicationDocuments[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.applicationDocuments[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.applicationDocuments[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.applicationDocuments[*].id)].auditDetails.lastModifiedTime


       - query: INSERT INTO eg_tl_address( id, tenantid, doorno,street,buildingName, locality, landmark, pincode, tradelicensedetailid, zonalid, wardid, wardno, contactno, email, createdby, lastmodifiedby, createdtime, lastmodifiedtime, postoffice, servicearea, waterbody) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: Licenses.*.tradeLicenseDetail.address
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.doorNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.street

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.buildingName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.localityName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.landmark

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.pincode

          - jsonPath: $.Licenses.*.tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.zonalId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.wardId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.wardNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.contactNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.email

          - jsonPath: $.Licenses.*.auditDetails.createdBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.createdTime

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.postOffice

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.serviceArea

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.waterbody


       - query: INSERT INTO eg_tl_institution(tenantId,active,id, tradelicensedetailid, institutionname,contactno,organisationregistrationno,address,natureofinstitution,email, createdby, lastmodifiedby, createdtime, lastmodifiedtime, licenseunitid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ;
         basePath: Licenses.*.tradeLicenseDetail.institution
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.institutionName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.contactNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.organisationRegistrationNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.address

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.natureOfInstitution 

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.email 

          - jsonPath: $.Licenses.*.auditDetails.createdBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.createdTime

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.licenseUnitId


       - query: INSERT INTO eg_tl_structureplacedetail(id, tenantid, blockno, surveyno, subdivisionno, partitionno, doorno, doorsub, buildingid, vehicleno, vesselno, tradelicensedetailid, active, createdby, lastmodifiedby, createdtime, lastmodifiedtime, isresurveyed, stallno) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?) ;
         basePath: Licenses.*.tradeLicenseDetail.structurePlace.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.blockNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.surveyNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.subDivisionNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.partitionNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.doorNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.doorNoSub

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.buildingId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.vehicleNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.vesselNo

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.active

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.isResurveyed

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.stallNo

       - query: INSERT INTO eg_tl_premiseowner(id, tenantid, tradelicensedetailid, premiseownername, housename, street, locality, postoffice, pincode, aadhaarno, contactno, active, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: Licenses.*.tradeLicenseDetail.ownerspremise.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownerspremise.*.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownerspremise.*.tenantId

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.ownerspremise[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownerspremise.*.ownerName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownerspremise.*.houseName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownerspremise.*.street

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownerspremise.*.locality

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownerspremise.*.postOffice

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownerspremise.*.pincode

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownerspremise.*.owneraadhaarNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownerspremise.*.ownerContactNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownerspremise.*.active

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.ownerspremise[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.ownerspremise[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.ownerspremise[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.ownerspremise[*].id)].auditDetails.lastModifiedTime

       - query: UPDATE eg_tl_tradelicense SET renewalactive = ? WHERE applicationNumber=?;
         basePath: Licenses.*
         jsonMaps:
          - jsonPath: $.Licenses.*.renewalActive

          - jsonPath: $.Licenses.*.oldApplicationNumber


 - version: 1.0
   description: Update tradeLicense details in EG_TL_TradeLicense  table
   fromTopic: update-tl-tradelicense
   isTransaction: true
   queryMaps:

       - query: INSERT INTO eg_tl_tradelicense_audit(id, accountid, tenantid, licensetype, licensenumber, applicationnumber, oldlicensenumber, applicationdate, commencementdate, issueddate, financialyear, validfrom, validto, action, status, createdby, lastmodifiedby, createdtime, lastmodifiedtime, tradename, businessservice, applicationtype, workflowcode, filestoreid, licenseunitnamelocal, is_migrated, assignee, desiredlicenseperiod) SELECT id, accountid, tenantid, licensetype, licensenumber, applicationnumber, oldlicensenumber, applicationdate, commencementdate, issueddate, financialyear, validfrom, validto, action, status, createdby, lastmodifiedby, createdtime, lastmodifiedtime, tradename, businessservice, applicationtype, workflowcode, filestoreid, licenseunitnamelocal, is_migrated, assignee, desiredlicenseperiod FROM eg_tl_tradelicense WHERE id = ?;
         basePath: Licenses.*
         jsonMaps:
          - jsonPath: $.Licenses.*.id
       - query: UPDATE eg_tl_tradelicense SET tradeName = ?, licenseunitnamelocal = ?, licenseNumber = ?,licensetype = ?, oldlicensenumber = ?, applicationdate = ?, commencementdate = ?, issueddate = ?, financialyear = ?, validfrom = ?, validto = ?, action = ?, status = ?,  lastmodifiedby = ?,  lastmodifiedtime = ?, businessservice=?,applicationtype=?, workflowcode=?, desiredlicenseperiod=?  WHERE id=?;
         basePath: Licenses.*
         jsonMaps:
          - jsonPath: $.Licenses.*.licenseUnitName

          - jsonPath: $.Licenses.*.licenseUnitNameLocal

          - jsonPath: $.Licenses.*.licenseNumber

          - jsonPath: $.Licenses.*.licenseType

          - jsonPath: $.Licenses.*.oldLicenseNumber

          - jsonPath: $.Licenses.*.applicationDate

          - jsonPath: $.Licenses.*.commencementDate

          - jsonPath: $.Licenses.*.issuedDate

          - jsonPath: $.Licenses.*.financialYear

          - jsonPath: $.Licenses.*.validFrom

          - jsonPath: $.Licenses.*.validTo

          - jsonPath: $.Licenses.*.action

          - jsonPath: $.Licenses.*.status

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.businessService

          - jsonPath: $.Licenses.*.applicationType

          - jsonPath: $.Licenses.*.workflowCode

          - jsonPath: $.Licenses.*.desiredLicensePeriod

          - jsonPath: $.Licenses.*.id


       - query: INSERT INTO eg_tl_tradelicensedetail_audit(id, ownershipcategory, channel, tradelicenseid, createdby, lastmodifiedby, createdtime, lastmodifiedtime, noofemployees, structuretype, businesssector, capitalinvestment, enterprisetype, structureplacesubtype, businessactivitydesc, licenseetype, establishmentunitid, mig_num_appln_id) SELECT id, ownershipcategory, channel, tradelicenseid, createdby, lastmodifiedby, createdtime, lastmodifiedtime, noofemployees, structuretype, businesssector, capitalinvestment, enterprisetype, structureplacesubtype, businessactivitydesc, licenseetype, establishmentunitid, mig_num_appln_id FROM eg_tl_tradelicensedetail WHERE id = ?;
         basePath: Licenses.*.tradeLicenseDetail
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.id


       - query: UPDATE eg_tl_tradelicensedetail SET  ownershipcategory = ?, channel = ?, noOfEmployees = ?,structureType = ?, businesssector=?, capitalinvestment=?, enterprisetype=?, lastmodifiedby = ?,  lastmodifiedtime = ?,  structureplacesubtype = ?, businessactivitydesc = ?, licenseetype = ?, establishmentunitid=? WHERE id = ?;
         basePath: Licenses.*.tradeLicenseDetail
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.ownershipCategory

          - jsonPath: $.Licenses.*.tradeLicenseDetail.channel

          - jsonPath: $.Licenses.*.tradeLicenseDetail.noOfEmployees

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structureType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.businessSector

          - jsonPath: $.Licenses.*.tradeLicenseDetail.capitalInvestment

          - jsonPath: $.Licenses.*.tradeLicenseDetail.enterpriseType

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlaceSubtype
          
          - jsonPath: $.Licenses.*.tradeLicenseDetail.businessActivityDesc

          - jsonPath: $.Licenses.*.tradeLicenseDetail.licenseeType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.establishmentUnitId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.id


       - query: INSERT INTO eg_tl_tradeunit(id, tenantid, active, businesscategory, businesstype, businesssubtype, tradelicensedetailid, createdby, lastmodifiedby, createdtime, lastmodifiedtime)  VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id) DO UPDATE SET active = ?, businesscategory = ?, businesstype = ?, businesssubtype = ?,  lastmodifiedby = ?,  lastmodifiedtime = ?;
         basePath: Licenses.*.tradeLicenseDetail.tradeUnits.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.businessCategory

          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.businessType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.businessSubtype

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.tradeUnits[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.tradeUnits[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.tradeUnits[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.tradeUnits[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.tradeUnits[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.businessCategory

          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.businessType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.tradeUnits.*.businessSubtype

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.tradeUnits[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.tradeUnits[*].id)].auditDetails.lastModifiedTime


       - query: INSERT INTO eg_tl_owner(id, tenantid,active, tradelicensedetailid, ownername, aadharno, email, createdby,lastmodifiedby, createdtime, lastmodifiedtime, ownernamelocal, careof, careofname, designation, housename, street, locality, postoffice, pincode, ownercontactno) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT ON CONSTRAINT pk_eg_tl_owner DO UPDATE SET active = ?, ownername = ?, aadharno = ?, email = ?, lastmodifiedby = ?,  lastmodifiedtime = ?, ownernamelocal = ?, careof = ?, careofname = ?, designation = ?, housename = ?, street = ?, locality = ?, postoffice = ?, pincode = ?, ownercontactno = ?;
         basePath: Licenses.*.tradeLicenseDetail.owners.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.uuid

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.userActive

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.name

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.aadhaarNumber

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.emailId

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.applicantNameLocal

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.careOf

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.careOfName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.designation

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.houseName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.street

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.locality

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.postOffice

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.pincode

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.mobileNumber

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.userActive

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.name

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.aadhaarNumber

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.emailId

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.applicantNameLocal

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.careOf

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.careOfName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.designation

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.houseName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.street

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.locality

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.postOffice

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.pincode

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.mobileNumber


       - query: INSERT INTO eg_tl_document_owner(id,tenantId,active,userid, tradeLicenseDetailId, documenttype, fileStoreId,documentuid, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT ON CONSTRAINT pk_eg_tl_document_owner DO UPDATE SET active = ?, documenttype = ?, fileStoreId = ?,documentuid = ?, lastmodifiedby = ?,  lastmodifiedtime = ?;
         basePath: Licenses.*.tradeLicenseDetail.owners.*.documents.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.documents.*.id

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners.*.documents[*].id)].tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.documents.*.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners[*][?({id} in @.documents[*].id)].uuid

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners.*.documents[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.documents.*.documentType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.documents.*.fileStoreId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.documents.*.documentUid

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners.*.documents[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners.*.documents[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners.*.documents[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners.*.documents[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.documents.*.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.documents.*.documentType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.documents.*.fileStoreId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.owners.*.documents.*.documentUid

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners.*.documents[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.owners.*.documents[*].id)].auditDetails.lastModifiedTime



       - query: INSERT INTO eg_tl_applicationdocument( id, tenantid, active, documenttype, tradecategorydetail, filestoreid, tradelicensedetailid, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id) DO UPDATE SET active = ?, documenttype =?, tradecategorydetail =?, filestoreid =?,lastmodifiedby =?, lastmodifiedtime =?;
         basePath: Licenses.*.tradeLicenseDetail.applicationDocuments.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.documentType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.tradecategorydetail

          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.fileStoreId

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.applicationDocuments[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.applicationDocuments[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.applicationDocuments[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.applicationDocuments[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.applicationDocuments[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.documentType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.tradecategorydetail

          - jsonPath: $.Licenses.*.tradeLicenseDetail.applicationDocuments.*.fileStoreId

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.applicationDocuments[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.applicationDocuments[*].id)].auditDetails.lastModifiedTime



       - query: UPDATE eg_tl_address SET doorno =?,street = ?,buildingName = ?, locality =?,  landmark =?, pincode =?, lastmodifiedby =?, lastmodifiedtime =?, zonalid = ?, wardid = ?, wardno = ?, contactno = ?, email = ?, postoffice = ?, servicearea = ?, waterbody = ? WHERE id =?;
         basePath: Licenses.*.tradeLicenseDetail.address
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.doorNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.street

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.buildingName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.localityName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.landmark

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.pincode
    
          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy
    
          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.zonalId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.wardId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.wardNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.contactNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.email

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.postOffice
    
          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.serviceArea

          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.waterbody
    
          - jsonPath: $.Licenses.*.tradeLicenseDetail.address.id


       - query: INSERT INTO eg_tl_institution(tenantId,active,id, tradelicensedetailid, institutionname,contactno,organisationregistrationno,address,natureofinstitution,email, createdby, lastmodifiedby, createdtime, lastmodifiedtime, licenseunitid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  ON CONFLICT (id) DO UPDATE SET active = ?,institutionname = ?, lastmodifiedby = ?,lastmodifiedtime = ?, contactno = ?, organisationregistrationno = ?, address = ?, natureofinstitution = ?, email = ?, licenseunitid = ?;
         basePath: Licenses.*.tradeLicenseDetail.institution
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.instituionName

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.contactNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.organisationRegistrationNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.address

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.natureOfInstitution 

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.email 

          - jsonPath: $.Licenses.*.auditDetails.createdBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.createdTime

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.licenseUnitId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.institutionName
     
          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy
     
          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.contactNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.organisationRegistrationNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.address

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.natureOfInstitution 

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.email 

          - jsonPath: $.Licenses.*.tradeLicenseDetail.institution.licenseUnitId


       - query: INSERT INTO eg_tl_structureplacedetail(id, tenantid, blockno, surveyno, subdivisionno, partitionno, doorno, doorsub, buildingid, vehicleno, vesselno, tradelicensedetailid, active, createdby, lastmodifiedby, createdtime, lastmodifiedtime, isresurveyed, stallno) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?) ON CONFLICT (id) DO UPDATE SET blockno=?, surveyno=?, subdivisionno=?, partitionno=?, doorno=?, doorsub=?, buildingid=?, vehicleno=?, vesselno=?, active=?, lastmodifiedby=?, lastmodifiedtime=?, isresurveyed=?, stallno = ?;
         basePath: Licenses.*.tradeLicenseDetail.structurePlace.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.blockNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.surveyNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.subDivisionNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.partitionNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.doorNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.doorNoSub

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.buildingId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.vehicleNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.vesselNo

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.active

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.isResurveyed

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.stallNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.blockNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.surveyNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.subDivisionNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.partitionNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.doorNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.doorNoSub

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.buildingId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.vehicleNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.vesselNo

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.active

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.structurePlace[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.isResurveyed

          - jsonPath: $.Licenses.*.tradeLicenseDetail.structurePlace.*.stallNo


 - version: 1.0
   description: Persists tradeLicense details in EG_TL_TradeLicense  table
   fromTopic: update-tl-workflow
   isTransaction: true
   queryMaps:

       - query: INSERT INTO eg_tl_tradelicense_audit(id, accountid, tenantid, licensetype, licensenumber, applicationnumber, oldlicensenumber, applicationdate, commencementdate, issueddate, financialyear, validfrom, validto, action, status, createdby, lastmodifiedby, createdtime, lastmodifiedtime, tradename, businessservice, applicationtype, workflowcode, filestoreid, licenseunitnamelocal, is_migrated, assignee, desiredlicenseperiod) SELECT id, accountid, tenantid, licensetype, licensenumber, applicationnumber, oldlicensenumber, applicationdate, commencementdate, issueddate, financialyear, validfrom, validto, action, status, createdby, lastmodifiedby, createdtime, lastmodifiedtime, tradename, businessservice, applicationtype, workflowcode, filestoreid, licenseunitnamelocal, is_migrated, assignee, desiredlicenseperiod FROM eg_tl_tradelicense WHERE id = ?;
         basePath: Licenses.*
         jsonMaps:
          - jsonPath: $.Licenses.*.id


       - query: INSERT INTO eg_tl_tradelicensedetail_audit(id, ownershipcategory, channel, tradelicenseid, createdby, lastmodifiedby, createdtime, lastmodifiedtime, noofemployees, structuretype, businesssector, capitalinvestment, enterprisetype, structureplacesubtype, businessactivitydesc, licenseetype, establishmentunitid, mig_num_appln_id) SELECT id, ownershipcategory, channel, tradelicenseid, createdby, lastmodifiedby, createdtime, lastmodifiedtime, noofemployees, structuretype, businesssector, capitalinvestment, enterprisetype, structureplacesubtype, businessactivitydesc, licenseetype, establishmentunitid, mig_num_appln_id FROM eg_tl_tradelicensedetail WHERE id = ?;
         basePath: Licenses.*.tradeLicenseDetail
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.id



       - query: INSERT INTO eg_tl_verificationdocument( id, tenantid, active, documenttype, tradecategorydetail, filestoreid,tradelicensedetailid, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id) DO UPDATE SET active = ?,documenttype =?, tradecategorydetail =?, filestoreid =?, lastmodifiedby =?, lastmodifiedtime =?;
         basePath: Licenses.*.tradeLicenseDetail.verificationDocuments.*
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.id

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.tenantId

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.documentType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.tradecategorydetail

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.fileStoreId

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.verificationDocuments[*].id)].tradeLicenseDetail.id

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.verificationDocuments[*].id)].auditDetails.createdBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.verificationDocuments[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.verificationDocuments[*].id)].auditDetails.createdTime

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.verificationDocuments[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.active

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.documentType

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.tradecategorydetail

          - jsonPath: $.Licenses.*.tradeLicenseDetail.verificationDocuments.*.fileStoreId

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.verificationDocuments[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.Licenses[*][?({id} in @.tradeLicenseDetail.verificationDocuments[*].id)].auditDetails.lastModifiedTime


       - query: UPDATE eg_tl_tradelicense SET validfrom = ?, validto = ?, licenseNumber =?, issueddate = ?, action = ?, status = ?,  lastmodifiedby = ?,  lastmodifiedtime = ?, assignee = ? WHERE id=?;
         basePath: Licenses.*
         jsonMaps:
          - jsonPath: $.Licenses.*.validFrom

          - jsonPath: $.Licenses.*.validTo

          - jsonPath: $.Licenses.*.licenseNumber

          - jsonPath: $.Licenses.*.issuedDate

          - jsonPath: $.Licenses.*.action

          - jsonPath: $.Licenses.*.status

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.assignUser

          - jsonPath: $.Licenses.*.id


      #  - query: UPDATE eg_tl_tradelicensedetail SET additionaldetail = ?,lastmodifiedby = ?,  lastmodifiedtime = ? WHERE id = ?;
      #    basePath: Licenses.*.tradeLicenseDetail
      #    jsonMaps:
      #     - jsonPath: $.Licenses.*.tradeLicenseDetail.additionalDetail
      #       type: JSON
      #       dbType: JSONB

      #     - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

      #     - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

      #     - jsonPath: $.Licenses.*.tradeLicenseDetail.id



 - version: 1.0
   description: Update adhocDetails
   fromTopic: update-tl-adhoc-tradelicense
   isTransaction: true
   queryMaps:


       - query: UPDATE eg_tl_tradelicensedetail SET adhocExemption = ?,adhocPenalty = ?,adhocExemptionReason = ?,adhocPenaltyReason = ?,lastmodifiedby = ?,  lastmodifiedtime = ? WHERE id = ?;
         basePath: Licenses.*.tradeLicenseDetail
         jsonMaps:
          - jsonPath: $.Licenses.*.tradeLicenseDetail.adhocExemption

          - jsonPath: $.Licenses.*.tradeLicenseDetail.adhocPenalty

          - jsonPath: $.Licenses.*.tradeLicenseDetail.adhocExemptionReason

          - jsonPath: $.Licenses.*.tradeLicenseDetail.adhocPenaltyReason

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedBy

          - jsonPath: $.Licenses.*.auditDetails.lastModifiedTime

          - jsonPath: $.Licenses.*.tradeLicenseDetail.id